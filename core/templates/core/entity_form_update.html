<!-- core/templates/core/entity_form_update.html -->
{% extends 'core/base.html' %}

{% block content %}
<a href="{% url entity_type|add:'_update' %}" class="back-button">← Назад к списку</a>

<h1 class="menu-title">Обновить {{ entity_name }}</h1>

<form method="post" action="">
    {% csrf_token %}
    {% for field in fields %}
    <div class="form-group">
        <label for="{{ field.name }}_field">
            {{ field.label }}{% if field.required %}*{% endif %}:
        </label>
        {% if field.type == 'textarea' %}
            <textarea
                name="{{ field.name }}"
                id="{{ field.name }}_field"
                class="form-control"
                placeholder="Введите {{ field.label|lower }}"
                {% if field.required %}required{% endif %}>{{ field.value }}</textarea>
        {% else %}
            <input
                type="{{ field.type|default:'text' }}"
                name="{{ field.name }}"
                id="{{ field.name }}_field"
                class="form-control"
                value="{{ field.value }}"
                placeholder="Введите {{ field.label|lower }}"
                {% if field.type == 'number' %}step="any"{% endif %}
                {% if field.required %}required{% endif %}>
        {% endif %}
    </div>
    {% endfor %}

    <button type="submit" class="btn-submit">Сохранить изменения</button>
</form>

{% if messages %}
    {% for message in messages %}
        <div style="margin-top: 20px; padding: 10px; border: 1px solid {% if message.tags == 'error' %}#ff0000{% else %}#00ff00{% endif %}; color: {% if message.tags == 'error' %}#ff0000{% else %}#00ff00{% endif %};">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}
{% endblock %}